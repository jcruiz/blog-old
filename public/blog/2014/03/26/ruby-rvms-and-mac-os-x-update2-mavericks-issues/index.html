
<!DOCTYPE HTML>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html" charset="UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
	<meta charset="utf-8">
	<title>Ruby RVMs and Mac OS X Update2 (Mavericks) Issues | The Other Radio</title>

	<meta name="author" content="Juan Camilo Ruiz">
	
	<meta name="description" content="I'm Juan Camilo Ruiz, technologist and computer sciences professional from Bogotá, Colombia-living in San Francisco. Product Manager for the Moovweb &hellip;">

	<meta name="HandheldFriendly" content="True" />
	<meta name="MobileOptimized" content="320" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />

	<link href="/atom.xml" rel="alternate" title="The Other Radio" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic|Open+Sans:700,400" />
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
</head>

<body class="post-template">
  <main class="content" role="main"><article class="post">
  
	<header class="post-header">
		<a id="blog-logo" href="/">The Other Radio</a>
	</header>
	<span class="post-meta">26 Mar 2014</span>
	<h1 class="post-title">Ruby RVMs and Mac OS X Update2 (Mavericks) Issues</h1>

	<section class="post-content">
		<p>I use <a href="http://rvm.io/">RVMs</a> to run ruby applications such as this blog and @Moovweb&rsquo;s pre-release software built via <a href="http://en.wikipedia.org/wiki/RubyGems">ruby gems</a>.</p>

<p>A friend of mine and I are going to try to work on a Rails application, which is a good opportunity for me to understand the technology behind so many apps nowadays.</p>

<p>As I was getting my environment ready, I ran in some issues on a couple of computers that I had recently updated to Mavericks update 2, this is what happened. I advice that you read the end of this post first&hellip; trust me.</p>

<!--more-->


<p>The first symthom is when you try to install a RVM version and you get messages of this type:</p>

<pre><code>ruby-2.0.0-p247 - #installing.................................................................................................................................
Retrieving rubygems-2.1.11
There is no checksum for 'http://production.cf.rubygems.org/rubygems/rubygems-2.1.11.tgz' or 'rubygems-2.1.11.tgz', it's not possible to validate it.
This could be because your RVM install's list of versions is out of date. You may want to
update your list of rubies by running 'rvm get stable' and try again.
If that does not resolve the issue and you wish to continue with unverified download
add '--verify-downloads 1' after the command.

There has been an error while trying to fetch rubygems.
Halting the installation.
</code></pre>

<p>Even if you get this error, it seems that the installation was successful. Now I tried to run a rails command:</p>

<pre><code>$ rails console
Could not find rake-10.1.1 in any of the sources
Run `bundle install` to install missing gems.
</code></pre>

<p>So then I follow the instruction:</p>

<pre><code>$ bundle install
</code></pre>

<p>And bump into the error:</p>

<pre><code>Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

/Users/juanca/.rvm/rubies/ruby-2.0.0-p247/bin/ruby extconf.rb
checking for pg_config... no
No pg_config... trying anyway. If building fails, please try again with
 --with-pg-config=/path/to/pg_config
checking for libpq-fe.h... no
Can't find the 'libpq-fe.h header
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of necessary
libraries and/or headers.  Check the mkmf.log file for more details.  You may
need configuration options.

Provided configuration options:
    --with-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/Users/juanca/.rvm/rubies/ruby-2.0.0-p247/bin/ruby
    --with-pg
    --without-pg
    --with-pg-dir
    --without-pg-dir
    --with-pg-include
    --without-pg-include=${pg-dir}/include
    --with-pg-lib
    --without-pg-lib=${pg-dir}/
    --with-pg-config
    --without-pg-config
    --with-pg_config
    --without-pg_config


Gem files will remain installed in /Users/juanca/.rvm/gems/ruby-2.0.0-p247@railstutorial_rails_4_0/gems/pg-0.15.1 for inspection.
Results logged to /Users/juanca/.rvm/gems/ruby-2.0.0-p247@railstutorial_rails_4_0/gems/pg-0.15.1/ext/gem_make.out
An error occurred while installing pg (0.15.1), and Bundler cannot continue.
Make sure that `gem install pg -v '0.15.1'` succeeds before bundling.
</code></pre>

<p>So after looking around, I discover that pg stands for <a href="http://www.postgresql.org">postgresql</a> so then it was suggested that I could installed using <a href="http://brew.sh">brew</a>. The plan of attack was to manage to install all of the above to then re-run the bundle install.</p>

<p>Unfortunately this attempt also failed, after running bundle install again, I got.</p>

<pre><code>Users/juanca/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:45:in `require': dlopen(/Users/juanca/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/x86_64-darwin13.1.0/digest/sha1.bundle, 9): Library not loaded: /opt/local/lib/libssl.1.0.0.dylib (LoadError)
Referenced from: /Users/juanca/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/x86_64-darwin13.1.0/digest/sha1.bundle
Reason: image not found - /Users/juanca/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/x86_64-darwin13.1.0/digest/sha1.bundle
from /Users/juanca/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:45:in `require'
from /Users/juanca/.rvm/gems/ruby-2.0.0-p247@railstutorial_rails_4_0/gems/bundler-1.5.3/lib/bundler/definition.rb:1:in `&lt;top (required)&gt;'
from /Users/juanca/.rvm/gems/ruby-2.0.0-p247@railstutorial_rails_4_0/gems/bundler-1.5.3/lib/bundler.rb:152:in `definition'
from /Users/juanca/.rvm/gems/ruby-2.0.0-p247@railstutorial_rails_4_0/gems/bundler-1.5.3/lib/bundler/cli.rb:253:in `install'
from /Users/juanca/.rvm/gems/ruby-2.0.0-p247@railstutorial_rails_4_0/gems/bundler-1.5.3/lib/bundler/vendor/thor/command.rb:27:in `run'
from /Users/juanca/.rvm/gems/ruby-2.0.0-p247@railstutorial_rails_4_0/gems/bundler-1.5.3/lib/bundler/vendor/thor/invocation.rb:121:in `invoke_command'
from /Users/juanca/.rvm/gems/ruby-2.0.0-p247@railstutorial_rails_4_0/gems/bundler-1.5.3/lib/bundler/vendor/thor.rb:363:in `dispatch'
from /Users/juanca/.rvm/gems/ruby-2.0.0-p247@railstutorial_rails_4_0/gems/bundler-1.5.3/lib/bundler/vendor/thor/base.rb:440:in `start'
from /Users/juanca/.rvm/gems/ruby-2.0.0-p247@railstutorial_rails_4_0/gems/bundler-1.5.3/lib/bundler/cli.rb:10:in `start'
from /Users/juanca/.rvm/gems/ruby-2.0.0-p247@railstutorial_rails_4_0/gems/bundler-1.5.3/bin/bundle:20:in `block in &lt;top (required)&gt;'
from /Users/juanca/.rvm/gems/ruby-2.0.0-p247@railstutorial_rails_4_0/gems/bundler-1.5.3/lib/bundler/friendly_errors.rb:5:in `with_friendly_errors'
from /Users/juanca/.rvm/gems/ruby-2.0.0-p247@railstutorial_rails_4_0/gems/bundler-1.5.3/bin/bundle:20:in `&lt;top (required)&gt;'
from /Users/juanca/.rvm/gems/ruby-2.0.0-p247@railstutorial_rails_4_0/bin/bundle:23:in `load'
from /Users/juanca/.rvm/gems/ruby-2.0.0-p247@railstutorial_rails_4_0/bin/bundle:23:in `&lt;main&gt;'
</code></pre>

<p>This story ends bad. After my many attempts, I ended up removing all rvms from my system and then re-installing everything again. I believe that after update symbolic links got removed. If you have had a similar experience or found a better workaround please leave a comment.</p>

	</section>

  <footer class="post-footer">
  <section class="author">
    <h4>Juan Camilo Ruiz</h4>
    <p></p>
  </section>
  <section class="share">
    <h4>Share this post</h4>
    <a class="icon-twitter" href="http://twitter.com/share?text=Ruby RVMs and Mac OS X Update2 (Mavericks) Issues&amp;url=http://jcruiz.co/blog/2014/03/26/ruby-rvms-and-mac-os-x-update2-mavericks-issues/" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
      <span class="hidden">Twitter</span>
    </a>
    <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://jcruiz.co/blog/2014/03/26/ruby-rvms-and-mac-os-x-update2-mavericks-issues/" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
      <span class="hidden">Facebook</span>
    </a>
    <a class="icon-google-plus" href="https://plus.google.com/share?url=http://jcruiz.co/blog/2014/03/26/ruby-rvms-and-mac-os-x-update2-mavericks-issues/" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
      <span class="hidden">Google+</span>
    </a>
  </section>
</footer>
  <hr>
  
    <div class="share">
</div>

  
  
</article></main>
  <footer class="site-footer"><a class="subscribe icon-feed" href="http://jcruiz.co/atom.xml"><span class="tooltip">Subscribe!</span></a>


<div class="inner">


Follow me on



<a class="social twitter" href="http://twitter.com/juanca" title="Twitter">Twitter</a>



<a class="social github" href="http://github.com/jcruiz" title="GitHub">GitHub</a>



<a class="social google_plus" href="http://plus.google.com/+JuanCamiloRuiz" title="Google+">Google+</a>


<section class="copyright">All content copyright <a href="/">Juan Camilo Ruiz</a> © 2014 • All rights reserved.</section>

<section class="poweredby">Casper theme by <a class="icon-ghost" href="http://tryghost.org">Ghost</a> &amp; Published with <a href="http://octopress.org">Octopress</a></section>

</div>
</footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="//yandex.st/highlightjs/7.3/highlight.min.js"></script>  
<script>hljs.initHighlightingOnLoad()</script>




	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-44281567-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>


</body>
</html>
